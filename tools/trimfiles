#! /bin/ksh

# @(#) $Header: /home/deyke/tmp/cvs/tcp/tools/Attic/trimfiles,v 1.13 1994-11-13 21:48:36 deyke Exp $

save_file()
{
	cp -p $1 $1.old
}

check_file()
{
	if cmp -s $1.old $1 ; then
		mv $1.old $1
	else
		rm $1.old
	fi
}

PATH=/usr/5bin:$PATH

if [[ ! -f .trimtime ]] ; then
	touch 0101000070 .trimtime
fi

for file in $(find * -prune -type f \( \
	-name '*.c' -o \
	-name '*.conf' -o \
	-name '*.h' -o \
	-name '*.html' -o \
	-name '*.mm' -o \
	-name '*.ms' -o \
	-name 'Makefile' -o \
	-name 'README' -o \
	-name 'configure' -o \
	-name 'doc' -o \
	-name 'fixnetrc' -o \
	-name 'genupd' -o \
	-name 'hosts' -o \
	-name 'intro.txt' -o \
	-name 'ip_routes' -o \
	-name 'net.rc*' -o \
	-name 'netrom_links' -o \
	-name 'notes' \
	\) -newer .trimtime -print) ; do
	save_file $file
	trim -s < $file.old > $file
	check_file $file
done
echo x > .trimtime
