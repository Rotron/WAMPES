# @(#) $Header: /home/deyke/tmp/cvs/tcp/lib/configure,v 1.10 1994-04-20 08:22:51 deyke Exp $

findfile()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isfile $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

findprog()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isfile $i -a $isexec $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	for i in $* ; do
		if [ $isfile $i -a $isexec $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

finddir()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isdir $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	for i in $* ; do
		if [ $isdir $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

case "`uname -sr`" in
HP-UX*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
AIX*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L;;
Linux*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L;;
386BSD*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
BSD/386*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
SunOS\ 4.*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
SunOS\ 5.*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
ULTRIX*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
A/UX*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
RISC\ iX*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h;;
AOS*)
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L;;
*)
	echo System `uname -sr` is not supported
	exit 1;;
esac

echo "#ifndef _CONFIGURE_H"
echo "#define _CONFIGURE_H"
echo

finddir HOME_DIR /home /users /u
finddir MAIL_DIR /var/mail /var/spool/mail /usr/mail /usr/spool/mail
finddir SPOOL_DIR /var/spool /usr/spool
finddir UUCP_DIR /var/spool/uucp /usr/spool/uucp

echo

findfile ALIASES_FILE /etc/aliases /etc/mail/aliases /usr/lib/aliases
findfile UTMP__FILE /var/adm/utmp /var/run/utmp /etc/utmp
findfile WTMP__FILE /var/adm/wtmp /var/log/wtmp /usr/adm/wtmp /etc/wtmp

echo

findprog GZIP_PROG /usr/bin/gzip /usr/local/bin/gzip
findprog LS_PROG /usr/bin/ls /bin/ls
findprog MAIL_PROG /usr/openwin/bin/xview/mail /usr/bin/mailx /bin/mailx /usr/bin/mail /bin/mail
findprog NEWALIASES_PROG /usr/bin/newaliases /usr/ucb/newaliases
findprog PATCH_PROG /usr/bin/patch /usr/local/bin/patch
findprog RNEWS_PROG /usr/bin/rnews /usr/local/bin/rnews
findprog SENDMAIL_PROG /usr/sbin/sendmail /usr/lib/sendmail

echo
echo "#endif"
