# @(#) $Header: /home/deyke/tmp/cvs/tcp/lib/configure,v 1.7 1994-02-14 16:34:42 deyke Exp $

findfile()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isfile $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

findprog()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isfile $i -a $isexec $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	for i in $* ; do
		if [ $isfile $i -a $isexec $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

finddir()
{
	name=$1
	shift
	for i in $* ; do
		if [ $isdir $i -a ! $islink $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	for i in $* ; do
		if [ $isdir $i ] ; then
			echo "#define ${name} \"$i\""
			return
		fi
	done
	echo "#define ${name} \"\""
}

OS="`uname -s`"
if [ "$OS" = HP-UX ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = AIX ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L
elif [ "$OS" = Linux ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L
elif [ "$OS" = 386BSD ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = BSD/386 ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = SunOS ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = ULTRIX ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = A/UX ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = "RISC iX" ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-h
elif [ "$OS" = AOS ] ; then
	isdir=-d ; isexec=-x ; isfile=-f ; islink=-L
else
	echo "System $OS is not supported."
	exit 1
fi

echo "#ifndef _CONFIGURE_H"
echo "#define _CONFIGURE_H"
echo

finddir HOME_DIR /home /users /u
finddir MAIL_DIR /var/mail /var/spool/mail /usr/mail /usr/spool/mail
finddir SPOOL_DIR /var/spool /usr/spool
finddir UUCP_DIR /var/spool/uucp /usr/spool/uucp

echo

findfile ALIASES_FILE /etc/aliases /etc/mail/aliases /usr/lib/aliases
findfile UTMP__FILE /var/adm/utmp /var/run/utmp /etc/utmp
findfile WTMP__FILE /var/adm/wtmp /var/log/wtmp /usr/adm/wtmp /etc/wtmp

echo

findprog GZIP_PROG /usr/bin/gzip /usr/local/bin/gzip
findprog MAIL_PROG /usr/openwin/bin/xview/mail /bin/mailx /usr/bin/mailx /bin/mail /usr/bin/mail
findprog NEWALIASES_PROG /usr/bin/newaliases /usr/ucb/newaliases
findprog PATCH_PROG /usr/bin/patch /usr/local/bin/patch
findprog RNEWS_PROG /usr/bin/rnews /usr/local/bin/rnews
findprog SENDMAIL_PROG /usr/sbin/sendmail /usr/lib/sendmail

echo
echo "#endif"
